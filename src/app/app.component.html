<div class="min-h-screen flex items-center justify-center bg-gradient-to-br from-indigo-100 via-white to-blue-100 p-6">
    <div class="relative bg-white shadow-md rounded-3xl p-10 max-w-xl w-full overflow-hidden">
        <!-- Decorative Waves -->
        <div class="absolute inset-0 bg-blue-50 opacity-20 rounded-3xl pointer-events-none">
            <svg class="absolute -bottom-10 -right-20 w-96 h-96 text-indigo-300 transform rotate-45" fill="none"
                viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
                <path fill="currentColor"
                    d="M55.2,-71.3C69.5,-60.8,73.8,-36.7,74.6,-15.3C75.3,6.1,72.6,24.8,62.2,37.4C51.7,50.1,33.4,56.8,16.4,64.6C-0.5,72.4,-16.1,81.3,-26.9,78.3C-37.8,75.3,-43.8,60.4,-53.3,46.7C-62.8,33,-75.7,20.5,-80.5,5.7C-85.3,-9,-81.8,-25.9,-73.2,-36.8C-64.5,-47.8,-50.7,-52.9,-37.3,-62.7C-24,-72.5,-12,-87.1,3,-91.7C18,-96.3,36,-91.8,55.2,-71.3Z"
                    transform="translate(100 100)" />
            </svg>
            <svg class="absolute -top-16 -left-24 w-96 h-96 text-purple-200 transform -rotate-12" fill="none"
                viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
                <path fill="currentColor"
                    d="M44.8,-61.1C54.6,-52.6,53.4,-31.8,57.8,-13.5C62.2,4.8,72.1,20.6,68.4,27.4C64.6,34.1,47.3,31.8,36.8,40.1C26.3,48.4,22.5,67.2,14.1,70.2C5.7,73.3,-6.3,60.5,-16.4,53.5C-26.6,46.5,-34.9,45.3,-42.3,39.6C-49.7,33.9,-56.2,23.8,-61.2,11.8C-66.1,-0.2,-69.5,-14,-61.5,-20.5C-53.5,-27,-34.2,-26.1,-21.8,-35.3C-9.3,-44.5,-4.6,-63.7,7.7,-73.6C20,-83.5,40.1,-84.1,44.8,-61.1Z"
                    transform="translate(100 100)" />
            </svg>
        </div>

        <div class="relative z-10">
            <div class="flex justify-between items-center mb-6">
                <div class="flex items-end">
                    <h1 class="text-xl font-bold mr-2">Chủ đề:</h1>
                    <div class="cursor-pointer" (click)="onReloadTopic()" nz-tooltip="Làm mới chủ đề">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                            stroke="currentColor" class="size-6">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99" />
                        </svg>
                    </div>
                </div>
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                    stroke="currentColor" class="size-6">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z" />
                    <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" />
                </svg>
            </div>

            <!-- Theme Selection Area -->
            <div class="relative z-10 text-center mb-6">
                <div class="mt-4 flex space-x-4 justify-center">
                    <!-- Theme 1 -->
                    <div *ngFor="let topic of topics; let i = index"
                        class="bg-gradient-to-br font-medium px-4 py-2 rounded-full hover:shadow-lg transition-all cursor-pointer flex items-center space-x-2"
                        [class.from-indigo-100]="i == 0" [class.to-indigo-300]="i == 0" [class.text-indigo-800]="i == 0"
                        [class.from-pink-100]="i == 1" [class.to-pink-300]="i == 1" [class.text-pink-800]="i == 1"
                        [class.from-green-100]="i == 2" [class.to-green-300]="i == 2" [class.text-green-800]="i == 2">
                        <span>{{ topic.value }}</span>
                    </div>

                </div>
            </div>

            <div class="text-left mb-4">
                <div class="flex items-end justify-between">
                    <div class="flex items-center">
                        <h2 class="text-lg font-semibold text-gray-700 mr-2">Câu hỏi:</h2>
                        <p class="text-gray-600">Hãy đặt câu với ngữ pháp sau:</p>
                    </div>

                    <button class="cursor-pointer" (click)="onReloadQuestion()" nz-tooltip="Làm mới câu hỏi">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                            stroke="currentColor" class="size-6">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99" />
                        </svg>
                    </button>
                </div>
                <div class="flex mt-2 items-center justify-between">
                    <div class="flex cursor-pointer" (click)="toggleCollapse()">
                        <span nz-icon [nzType]="isCollapse ? 'caret-down' : 'caret-right'" nzTheme="outline"></span>
                        <p class="text-xl font-bold text-gray-900">{{ grammar.name }}</p>
                    </div>
                    <div class="ml-2 flex flex-none">
                        <span *ngIf="grammar.book" class="px-3 py-1 bg-pink-500 text-xs text-white rounded-full mr-1">{{ grammar.book }}</span>
                        <span class="px-3 py-1 bg-orange-500 text-xs text-white rounded-full">{{ grammar.scope }}</span>
                    </div>
                </div>

                <div *ngIf="isCollapse" class="mt-2">
                    <p>{{grammar.mean}}</p>
                </div>
            </div>

            <div class="relative mb-8 hidden">
                <input [(ngModel)]="answer" type="text" id="beautiful-input" [class.border-blue-500]="answer!=''"
                    [class.ring-2]="answer!=''" [class.ring-blue-400]="answer!=''"
                    class="border-gray-300 focus:border-blue-500 shadow-sm focus:shadow-md w-full p-4 bg-white border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-400 transition-all placeholder-transparent peer backdrop-blur-md"
                    placeholder="" />
                <label for="beautiful-input" [class.-translate-y-6]="answer!=''"
                    class="absolute left-4 top-4 text-gray-600 text-sm transition-all transform peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:-translate-y-6 peer-focus:scale-90 backdrop-filter backdrop-blur-lg bg-white px-2">
                    Câu trả lời
                </label>
            </div>

            <div class="relative mb-8">
                <div class="overflow-hidden">
                    <textarea [(ngModel)]="answer" [class.border-blue-500]="answer!=''"
                        [class.border-gray-300]="answer==''"
                        class="w-full p-3 h-24 resize-none outline-none  focus:border-blue-500 shadow-sm  bg-white border rounded-md focus:outline-none transition-all placeholder-transparent peer backdrop-blur-md"></textarea>
                    <label for="beautiful-input" [class.-translate-y-6]="answer!=''"
                        class="absolute left-4 top-4 text-gray-600 text-sm transition-all transform peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:-translate-y-6 peer-focus:scale-90 backdrop-filter backdrop-blur-lg bg-white px-2">
                        Câu trả lời
                    </label>
                    <div class="flex justify-end p-2">
                        <button class="bg-gradient-to-r from-blue-500 to-green-400 text-white px-4 py-2 rounded" (click)="onCheckAnswer()">
                            Trả lời
                        </button>
                    </div>
                </div>
            </div>

            <div [innerHTML]="answerResult">
            </div>
        </div>
    </div>
</div>